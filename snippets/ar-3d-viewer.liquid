{%- comment -%}
3D/AR product viewer using Shopify AR (USDZ/glTF).
{%- endcomment -%}
{% if product.media.size > 0 %}
  {% assign ar_media = product.media | where: "media_type", "model" | first %}
  {% if ar_media %}
    <div class="ar-3d-viewer">
      <model-viewer src="{{ ar_media.preview_image | file_url }}"
        alt="{{ product.title }} 3D"
        ar ar-modes="scene-viewer quick-look webxr"
        camera-controls
        autoplay
        style="width:100%;height:400px;">
      </model-viewer>
      <button onclick="document.querySelector('model-viewer').activateAR()">View in AR</button>
    </div>
    <script type="module" src="https://unpkg.com/@google/model-viewer/dist/model-viewer.min.js"></script>
  {% endif %}
{% endif %}