{%- comment -%}
Mega Navigation: Multi-column, images, featured links, mobile support.
{%- endcomment -%}
<nav class="main-nav">
  <ul class="nav-list">
    {% for link in linklists.main-menu.links %}
      <li class="nav-item{% if link.links.size > 0 %} has-mega{% endif %}">
        <a href="{{ link.url }}">{{ link.title }}</a>
        {% if link.links.size > 0 %}
          <div class="mega-menu">
            <div class="mega-menu-columns">
              {% for sublink in link.links %}
                <div class="mega-col">
                  <a href="{{ sublink.url }}" class="mega-heading">{{ sublink.title }}</a>
                  {% if sublink.links.size > 0 %}
                    <ul>
                      {% for item in sublink.links %}
                        <li><a href="{{ item.url }}">{{ item.title }}</a></li>
                      {% endfor %}
                    </ul>
                  {% endif %}
                </div>
              {% endfor %}
              <div class="mega-featured">
                <a href="/collections/featured">
                  <img src="{{ 'mega-featured.jpg' | asset_url }}" alt="Featured">
                  <span>Featured Collection</span>
                </a>
              </div>
            </div>
          </div>
        {% endif %}
      </li>
    {% endfor %}
  </ul>
</nav>
<script>
  // Mega menu open/close on hover/focus/keyboard
  document.querySelectorAll('.has-mega').forEach(function(item){
    item.addEventListener('mouseenter', () => item.classList.add('open'));
    item.addEventListener('mouseleave', () => item.classList.remove('open'));
    item.querySelector('a').addEventListener('focus', () => item.classList.add('open'));
    item.querySelector('a').addEventListener('blur', () => item.classList.remove('open'));
  });
</script>