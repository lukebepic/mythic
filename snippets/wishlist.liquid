{%- comment -%}
Wishlist feature: Add/remove products, sync for guests and logged-in users.
{%- endcomment -%}
<div class="wishlist-wrapper">
  <button class="wishlist-btn" data-product-id="{{ product.id }}">
    <span class="wishlist-icon">{% if customer %}★{% else %}☆{% endif %}</span>
    <span>Add to Wishlist</span>
  </button>
</div>
<script>
  // Wishlist: localStorage for guest, sync to account for logged-in
  function getWishlist() {
    return JSON.parse(localStorage.getItem('wishlist') || '[]');
  }
  function setWishlist(arr) {
    localStorage.setItem('wishlist', JSON.stringify(arr));
  }
  document.querySelectorAll('.wishlist-btn').forEach(btn => {
    btn.addEventListener('click', function() {
      const id = btn.dataset.productId;
      let wishlist = getWishlist();
      if (wishlist.includes(id)) {
        wishlist = wishlist.filter(p => p !== id);
        btn.querySelector('.wishlist-icon').textContent = '☆';
      } else {
        wishlist.push(id);
        btn.querySelector('.wishlist-icon').textContent = '★';
      }
      setWishlist(wishlist);
      // Optionally send to server for logged-in customers
    });
  });
</script>